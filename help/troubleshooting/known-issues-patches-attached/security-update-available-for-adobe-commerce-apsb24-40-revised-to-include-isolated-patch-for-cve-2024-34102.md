---
title: Atualização de segurança disponível para o Adobe Commerce - [!DNL APSB24-40]
promoted: true
description: Aplique um hotfix e um patch para corrigir [!DNL CVE-2024-34102] o Adobe Commerce 2.4.4-p8, 2.4.5-p7, 2.4.6-p5, 2.4.7 e versões anteriores.
feature: Compliance, Security
role: Developer
exl-id: b6f4a26f-a6cf-4ced-841e-a579c8e0f8f4
source-git-commit: 991645d5fdaffa5afacff5fc7e6b6efbca027f33
workflow-type: tm+mt
source-wordcount: '791'
ht-degree: 0%

---

# Atualização de segurança disponível para o Adobe Commerce - [!DNL APSB24-40]

>[!NOTE]
>
>**Esta é uma atualização urgente relacionada a [!DNL CVE-2024-34102]. O Adobe está ciente de que [!DNL CVE-2024-34102] foi explorado na natureza em ataques muito limitados que atingiram os comerciantes do Adobe Commerce.

Em 17 de julho de 2024, lançamos um [!DNL hotfix] além da versão de atualização de segurança em 11 de junho de 2024 e/ou o patch isolado lançado em 28 de junho de 2024.

**Verifique todos os ambientes de produção e não produção para ajudar a garantir que seu armazenamento seja completamente corrigido em todas as instâncias.  Execute <u>ação imediata</u> para resolver a vulnerabilidade.**

>[!NOTE]
>
>**Somente para Adobe Commerce em comerciantes da nuvem**:<br><br>1. Verifique se você está na versão mais recente do [!DNL ECE Tools]. Caso contrário, atualize (ou pule para o item 2). Para verificar sua versão existente, execute este comando:`composer show magento/ece-tools`<br>2. Se você já estiver na versão mais recente do [!DNL ECE Tools], verifique a presença do arquivo `op-exclude.txt`. Para fazer isso, execute este comando:`ls op-exclude.txt`.Se esse arquivo não estiver presente, adicione https://github.com/magento/magento-cloud/blob/master/op-exclude.txt ao repositório, confirme a alteração e reimplante.<br>3. Sem precisar atualizar o [!DNL ECE Tools], você também pode apenas adicionar/modificar o https://github.com/magento/magento-cloud/blob/master/op-exclude.txt no repositório, confirmar a alteração e reimplantar.

## Opção 1 - Para comerciantes que <u>não</u> aplicaram a atualização de segurança de 11 de junho de 2024, nem o patch isolado lançado em 28 de junho de 2024

1. Aplicação do [!DNL hotfix] lançado em 17 de julho de 2024.
1. Aplique o patch de segurança.
1. Habilitar [!UICONTROL maintenance mode].
1. Desabilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:disable`).
1. [Gire o [!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key).
1. Limpe o cache.
1. Habilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:enable`).
1. Desabilitar [!UICONTROL maintenance mode].

OU

1. Aplique o patch isolado. **<u>OBSERVAÇÃO</u>: esta versão do patch isolado contém o [!DNL hotfix] de 17 de julho de 2024.**
1. Habilitar [!UICONTROL maintenance mode].
1. Desabilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:disable`).
1. [Gire o [!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key).
1. Limpe o cache.
1. Habilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:enable`).
1. Desabilitar [!UICONTROL maintenance mode].

## Opção 2 - Para comerciantes que <u>já</u> aplicaram a atualização de segurança de 11 de junho de 2024 e/ou o patch isolado lançado em 28 de junho de 2024

1. Aplicação do [!DNL hotfix] lançado em 17 de julho de 2024.
1. Habilitar [!UICONTROL maintenance mode].
1. Desabilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:disable`).
1. [Gire o [!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key).
1. Limpe o cache.
1. Habilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:enable`).
1. Desabilitar [!UICONTROL maintenance mode].

## Opção 3 - Para comerciantes que <u>já</u> (1) aplicaram a atualização de segurança de 11 de junho de 2024 e/ou (2) o patch isolado lançado em 28 de junho de 2024 e (3) giraram suas chaves de criptografia

* Aplique o [hotfix](#hotfix) lançado em 17 de julho de 2024.


>[!NOTE]
>
>Para garantir que você ainda esteja seguro após a atualização, você também deve **[girar o [!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)**:<br><br>1. Habilitar [!UICONTROL maintenance mode].<br>2. Desabilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:disable`).<br>3. Gire o [!DNL encryption keys].<br>4. Habilitar a execução de [!DNL cron] (comando Commerce on Cloud: `vendor/bin/ece-tools cron:enable`).<br>5. Desabilitar [!UICONTROL maintenance mode].

Neste artigo, você descobrirá como implementar o patch isolado para esse problema nas versões atual e anterior do Adobe Commerce e do Magento Open Source.
**<u>OBSERVAÇÃO</u>: esta versão do patch isolado contém o [!DNL hotfix] de 17 de julho de 2024.**

## Produtos e versões afetados

Adobe Commerce na nuvem, Adobe Commerce no local e Magento Open Source:

* 2.4.7-p1 e anterior
* 2.4.6-p6 e anterior
* 2.4.5-p8 e anterior
* 2.4.4-p9 e anterior

## Solução para Adobe Commerce na nuvem, Adobe Commerce no local de software e Magento Open Source

Para ajudar a resolver a vulnerabilidade dos produtos e versões afetados, aplique o patch do [!DNL VULN-27015] (dependendo da sua versão) e gire o [!UICONTROL encryption keys].

## Detalhes do Hotfix {#hotfix}

* Baixe o [!DNL Hotfix] [AC-12485_Hotfix_COMPOSER_patch.zip](assets/AC-12485_Hotfix_COMPOSER_patch.zip)

## Detalhes do patch isolado

**<u>OBSERVAÇÃO</u>: esta versão do patch isolado contém o [!DNL hotfix] de 17 de julho de 2024.**

Use os seguintes patches anexados, dependendo da sua versão do Adobe Commerce/Magento Open Source:

### Para a versão 2.4.7:

* [VULN-27015-2.4.7x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.7x_v2_COMPOSER_patch.zip)

### Para as versões 2.4.6, 2.4.6-p1, 2.4.6-p2, 2.4.6-p3, 2.4.6-p4, 2.4.6-p5:

* [VULN-27015-2.4.6x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.6x_v2_COMPOSER_patch.zip)

### Para as versões 2.4.5, 2.4.5-p1, 2.4.5-p2, 2.4.5-p3, 2.4.5-p4, 2.4.5-p5, 2.4.5-p6, 2.4.5-p7:

* [VULN-27015-2.4.5x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.5x_v2_COMPOSER_patch.zip)

### Para as versões 2.4.4, 2.4.4-p1, 2.4.4-p2, 2.4.4-p3, 2.4.4-p4, 2.4.4-p5, 2.4.4-p6, 2.4.4-p7, 2.4.4-p8:

* [VULN-27015-2.4.4x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.4x_v2_COMPOSER_patch.zip)


## Como aplicar o patch isolado e o [!DNL hotfix]

Descompacte o arquivo e consulte [Como aplicar um patch de compositor fornecido pelo Adobe](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html) em nossa base de dados de suporte para obter instruções.

## Somente para Adobe Commerce em comerciantes na nuvem - Como saber se os patches isolados foram aplicados

Considerando que não é possível verificar facilmente se o problema foi corrigido, você pode querer verificar se o patch isolado [!DNL VULN-27015] foi aplicado com sucesso.

<u>Você pode fazer isso seguindo as etapas abaixo, usando o arquivo `VULN-27015-2.4.7_COMPOSER.patch` como exemplo</u>:

1. [Instale a Ferramenta de Correções de Qualidade](https://experienceleague.adobe.com/docs/commerce-operations/tools/quality-patches-tool/usage.html).
1. Executar o comando:<br>
   ![cve-2024-34102-tell-if-patch-plied-code](assets/cve-2024-34102-tell-if-patch-applied-code.png)

<!--
    ```bash
    vendor/bin/magento-patches -n status |grep "27015\|Status"
    ```
-->

1. Você deve ver uma saída semelhante a esta, onde VULN-27015 retorna o status *Aplicado*:

   ```bash
   ║ Id            │ Title                                                        │ Category        │ Origin                 │ Status      │ Details                                          ║ ║ N/A           │ ../m2-hotfixes/VULN-27015-2.4.7_COMPOSER_patch.patch      │ Other           │ Local                  │ Applied     │ Patch type: Custom                                
   ```

## Girar/alterar o [!UICONTROL encryption key] após aplicar o patch

Para obter orientação **sobre como girar/alterar o [!UICONTROL encryption key] após aplicar o patch, consulte o [Guia de sistemas do administrador: [!UICONTROL Encryption key]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)** na documentação do Guia de Sistemas do Administrador do Commerce.

## Orientação adicional sobre proteção do armazenamento e rotação de chaves de criptografia

Para obter orientações adicionais sobre como proteger seu armazenamento e girar chaves de criptografia em relação ao [!DNL CVE-2024-34102], consulte [Orientação sobre como proteger seu armazenamento e girar chaves de criptografia: [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/guidance-on-securing-your-store-and-rotating-encryptionkeys-cve-2024-34102.md), também na Base de Dados de Conhecimento Adobe Commerce.

## Atualizações de segurança

Atualizações de segurança disponíveis para o Adobe Commerce:

* [Solução de Problemas de Rotação de Chaves de Criptografia: [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/troubleshooting-encryption-key-rotation-cve-2024-34102)
* [Boletim de Segurança de Adobe ([!DNL APSB24-40])](https://helpx.adobe.com/security/products/magento/apsb24-40.html)